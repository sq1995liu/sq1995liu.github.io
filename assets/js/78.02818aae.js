(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{613:function(s,t,a){s.exports=a.p+"assets/img/image-20200308192737229.de3d3e2d.png"},614:function(s,t,a){s.exports=a.p+"assets/img/image-20200318153933559.91b9dc3d.png"},980:function(s,t,a){"use strict";a.r(t);var n=a(21),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[n("strong",[s._v("更多内容见博客:")]),s._v(" https://www.cnblogs.com/xiaonq/p/12377099.html")]),s._v(" "),n("p",[n("strong",[s._v("项目地址:")]),s._v(" https://gitee.com/edushiyanlou/django-docker")]),s._v(" "),n("h2",{attrs:{id:"_01-项目环境介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_01-项目环境介绍"}},[s._v("#")]),s._v(" 01.项目环境介绍")]),s._v(" "),n("h3",{attrs:{id:"_1-1-项目部署架构图"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-项目部署架构图"}},[s._v("#")]),s._v(" 1.1 项目部署架构图")]),s._v(" "),n("p",[n("img",{staticStyle:{width:"900px","margin-left":"50px"},attrs:{src:a(613)}})]),s._v(" "),n("h3",{attrs:{id:"_1-2-项目目录结构说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-项目目录结构说明"}},[s._v("#")]),s._v(" 1.2 项目目录结构说明")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[s._v("django"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("docker                "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 项目根路径")]),s._v("\n│  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gitignore                    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# git忽略不上传的文件")]),s._v("\n│  docker"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("compose"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker-compose文件")]),s._v("\n│  Dockerfile                    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 部署django项目的dockerfile")]),s._v("\n│  README"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("md                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目Readme说明")]),s._v("\n│  requirements"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt              "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目必须要安装的文件")]),s._v("\n│\n├─nginx                      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## nginx容器配置文件")]),s._v("\n│  │  nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf                 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/nginx/nginx.conf配置文件")]),s._v("\n│  │\n│  └─conf                        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/nginx/conf.d配置nginx文件夹")]),s._v("\n│          default"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf\n│\n└─web                        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 部署django项目的web容器")]),s._v("\n    │  manage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n    │  uwsgi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ini                 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# django项目的uwsgi配置文件 ")]),s._v("\n    │\n    ├─demoapp\n    │  │  admin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n    │  │  apps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n    │  │  models"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n    │  │  tasks"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py               "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置celery任务文件")]),s._v("\n    │  │  tests"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n    │  │  urls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n    │  │  views"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n    │  │  __init__"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n    │  │\n    │  ├─migrations\n    │  │      __init__"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 引入celery")]),s._v("\n    │  │\n    │  └─templates\n    │      └─demoapp\n    │              celery_detail"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html          "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看具体celery执行结果页面")]),s._v("\n    │              celery_index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html           "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看对应celery任务页面")]),s._v("\n    │              index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html                  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目主页面")]),s._v("\n    │\n    └─web\n            celery"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py           "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# celery配置文件")]),s._v("\n            settings"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n            urls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n            wsgi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n            __init__"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br")])]),n("h2",{attrs:{id:"_02-docker-compose-yml详释"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_02-docker-compose-yml详释"}},[s._v("#")]),s._v(" 02.docker-compose.yml详释")]),s._v(" "),n("h3",{attrs:{id:"_2-1-docker-compose-yml详解"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-docker-compose-yml详解"}},[s._v("#")]),s._v(" 2.1 docker-compose.yml详解")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[s._v("version"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v("                       "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cocker compose版本号")]),s._v("\n\nservices"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("                          "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 顶级配置文件")]),s._v("\n  mysql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("                           "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务名: 容器建通信、管理容器")]),s._v("\n    image"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.7")]),s._v("               "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 引入官方mysql镜像")]),s._v("\n    volumes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("var"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 把当前文件夹下的 ./mysql文件夹挂载到docker容器 /var/lib/mysql 路径下")]),s._v("\n    expose"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3306"')]),s._v("                        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将当前容器的端口3306端口暴露给link到本容器的容器")]),s._v("\n    restart"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" always                   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 宿主机重启自动拉起这个docker容器")]),s._v("\n    environment"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" MYSQL_ROOT_PASSWORD"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("root             "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mysql服务器root密码root")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" MYSQL_DATABASE"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("djangodocker          "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建数据库 djangodocker")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" MYSQL_USER"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("django                    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个用户 django")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" MYSQL_PASSWORD"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("django                "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户密码为django")]),s._v("\n\n  nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    image"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("alpine\n    volumes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("web"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("staticfiles"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("django_static\n    ports"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"80:80"')]),s._v("                             "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 绑定容器的80端口到主机的80端口")]),s._v("\n    depends_on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" web                                 "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 必须先启动web容器然才能启动nginx容器")]),s._v("\n\n  redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    image"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("alpine\n    expose"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6379"')]),s._v("\n    restart"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" always\n\n  web"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    build"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# command: python manage.py runserver 0:8000")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ports:")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#   - "8000:8000"')]),s._v("\n    command"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" uwsgi "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ini uwsgi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ini             "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动uwsgi命令")]),s._v("\n    working_dir"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("code"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("web                     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目工作路径")]),s._v("\n    volumes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("code                                "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将当前文件夹下所有文件挂载到容器的 /code 文件夹")]),s._v("\n    expose"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8000"')]),s._v("\n    depends_on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("                                "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 必须mysql和reids容器启动后才能启动web容器")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" mysql\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" redis\n\n  celery"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    build"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n    command"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" celery "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("A web worker "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("l info\n    working_dir"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("code"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("web\n    volumes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("code\n    depends_on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" mysql\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" redis\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br")])]),n("h3",{attrs:{id:"_2-2-相似指令比较"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-相似指令比较"}},[s._v("#")]),s._v(" 2.2 相似指令比较")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v("'''1. expose 与 ports 比较'''")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ports: 绑定容器的端口到主机的端口，这样就可以在外网访问docker容器的服务")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# expose: 将当前容器的端口3暴露给link到本容器的容器，expose不会将端口暴露给主机")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v("'''2. depends_on 与 links区别'''")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# depends_on: 指定本容器启动依赖的容器必须先启动")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# links: 保证容器如果ip变化也能访问(基本已经弃用，因为不使用link仍然可以通过容器名称访问)")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h3",{attrs:{id:"_2-3-简单测试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-简单测试"}},[s._v("#")]),s._v(" 2.3 简单测试")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node1 mysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("docker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim docker-compose.yml ")]),s._v("\nversion"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v("\nservices"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  mysql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    image"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.7")]),s._v("\n    volumes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("var"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql\n    ports"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3306:3306"')]),s._v("\n    environment"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" MYSQL_ROOT_PASSWORD"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("root\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" MYSQL_DATABASE"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("djangodb\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node1 mysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("docker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker-compose -f docker-compose.yml up")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("h3",{attrs:{id:"_2-4-文件说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-文件说明"}},[s._v("#")]),s._v(" 2.4 文件说明")]),s._v(" "),n("p",[n("img",{staticStyle:{width:"700px","margin-left":"20px"},attrs:{src:a(614)}})])])}),[],!1,null,null,null);t.default=e.exports}}]);