(window.webpackJsonp=window.webpackJsonp||[]).push([[118],{522:function(t,s,a){t.exports=a.p+"assets/img/image-20200511090755364.41f611eb.png"},891:function(t,s,a){"use strict";a.r(s);var e=a(21),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h3",{attrs:{id:"_1-基于-django-的后台管理平台，采用-rbac-权限管理机制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-基于-django-的后台管理平台，采用-rbac-权限管理机制"}},[t._v("#")]),t._v(" 1.基于 Django 的后台管理平台，采用 RBAC 权限管理机制")]),t._v(" "),e("ul",[e("li",[t._v("用户表、角色表、权限表、资源列表\n"),e("ul",[e("li",[e("code",[t._v("用户表")]),t._v("：账号、姓名、邮箱、添加时间、最后登录时间、账号是否禁止登录")]),t._v(" "),e("li",[e("code",[t._v("角色表")]),t._v("：商品管理员、订单管理员、超级管理员")]),t._v(" "),e("li",[e("code",[t._v("资源列表(路径正则)")]),t._v("：资源名称（项目模块名称），资源路径（后台路由）\n"),e("ul",[e("li",[t._v("资源分类：商品模块、订单模块、营销模块、权限模块、内容模块、其他模块")])])]),t._v(" "),e("li",[e("code",[t._v("权限表")]),t._v("：对某一个路由的增删改查权限")]),t._v(" "),e("li",[e("img",{staticStyle:{width:"1000px","margin-left":"0px"},attrs:{src:a(522)}})])])])]),t._v(" "),e("h3",{attrs:{id:"_1-rbac角色权限管理机制实现思路"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-rbac角色权限管理机制实现思路"}},[t._v("#")]),t._v(" 1. RBAC角色权限管理机制实现思路")]),t._v(" "),e("div",{staticClass:"language-python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 面向资源编程")]),t._v("\nhttps"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("//")]),t._v("www"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("shiyanlou"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("v1"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("books"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 请求后端 books书籍表中数据")]),t._v("\n\tget\n    post\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 用户表")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 角色表")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 权限表")]),t._v("\nget"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("post"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("put"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("delete 对应关系\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br")])]),e("ul",[e("li",[t._v("所有权限的本质是对数据库中表中数据增删改查的操作")]),t._v(" "),e("li",[t._v("而这些增删改查的操作是通过前端不同路由，通过get、post、put、delete方法操作数据库的")]),t._v(" "),e("li",[t._v("对权限的控制，最简单的方法就是判断当前用户是否可以对指定路由请求操作的权限")]),t._v(" "),e("li",[t._v("把角色和这个角色能够访问的 url 和 请求方式进行关联（因为正是的业务逻辑用户权限划分力度可能非常细致）")]),t._v(" "),e("li",[t._v("再简单的业务逻辑中这一张表就是权限表")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("路由 资源(可能对应的是后端路由的 name名称，可以通过name名称解析出对应路由)")]),t._v(" "),e("th",[t._v("请求方式")]),t._v(" "),e("th",[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("https://www.shiyanlou.com/v1/books/")]),t._v(" "),e("td",[t._v("get")]),t._v(" "),e("td",[t._v("判断用户是否可以查询books表中数据")])]),t._v(" "),e("tr",[e("td",[t._v("https://www.shiyanlou.com/v1/books/")]),t._v(" "),e("td",[t._v("post")]),t._v(" "),e("td",[t._v("判断用户是否可以添加books表中数据")])]),t._v(" "),e("tr",[e("td",[t._v("https://www.shiyanlou.com/v1/books/")]),t._v(" "),e("td",[t._v("put")]),t._v(" "),e("td",[t._v("判断用户是否可以更新books表中数据")])]),t._v(" "),e("tr",[e("td",[t._v("https://www.shiyanlou.com/v1/books/")]),t._v(" "),e("td",[t._v("delete")]),t._v(" "),e("td",[t._v("判断用户是否可以删除books表中数据")])])])]),t._v(" "),e("ul",[e("li",[t._v("后端如何判断用户权限\n"),e("ul",[e("li",[t._v("用户发送求方法 https://www.shiyanlou.com/v1/books/ 的url")]),t._v(" "),e("li",[t._v("后端首先查询时哪一个用户，然后查询当前用户的角色")]),t._v(" "),e("li",[t._v("最后判断这个角色是否可以访问 https://www.shiyanlou.com/v1/books/ 的对应方法即可")]),t._v(" "),e("li",[t._v("如果这个角色有权限访问这个url就返回数据，不能访问就返回 401状态码")])])])])])}),[],!1,null,null,null);s.default=n.exports}}]);