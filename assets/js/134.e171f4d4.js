(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{644:function(t,s,a){t.exports=a.p+"assets/img/image-20201228203631894.afe93827.png"},992:function(t,s,a){"use strict";a.r(s);var e=a(21),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"_01-kubectl与kubeconfig关系"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_01-kubectl与kubeconfig关系"}},[t._v("#")]),t._v(" 01.kubectl与kubeconfig关系")]),t._v(" "),e("h2",{attrs:{id:"_1-1-kube-apiserver两个端口"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-kube-apiserver两个端口"}},[t._v("#")]),t._v(" 1.1 kube-apiserver两个端口")]),t._v(" "),e("ul",[e("li",[t._v("localhost:8080  非安全端口，是kubectl默认先连接8080")]),t._v(" "),e("li",[t._v("如果你配置kubeconfig（"),e("code",[t._v("/root/.kube/config")]),t._v("）就直接走这个配置连接的安全端口")]),t._v(" "),e("li",[t._v("masterip:6443   安全端口")])]),t._v(" "),e("h2",{attrs:{id:"_1-2-在node节点中配置apiserver配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-在node节点中配置apiserver配置文件"}},[t._v("#")]),t._v(" 1.2 在node节点中配置apiserver配置文件")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.在k8s-node1和k8s-node2中创建 /root/.kube 文件夹 '")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("node1 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# mkdir "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("p $"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HOME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("kube\n\n"),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2.在k8s-master复制admin.conf配置文件到node1和node2中 '")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("master "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# scp "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("kubernetes"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("admin"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf   root@"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v(".56")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v(".62")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token regex"}},[e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("root")]),e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("kube"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("config\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("master "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# scp "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("kubernetes"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("admin"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf   root@"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v(".56")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v(".63")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token regex"}},[e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("root")]),e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("kube"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("config\n\n"),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'3.配置完后就可以在node节点中执行kubectl命令，通过apiserver接口查看k8s集群状态  '")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("node2 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("kube"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# kubectl "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" node\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NAME")]),t._v("        "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STATUS")]),t._v("   "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ROLES")]),t._v("    "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AGE")]),t._v("     "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VERSION")]),t._v("\nk8s"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("master    Ready    master     "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("h58m   v1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("19.0")]),t._v("\nk8s"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("node1     Ready    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("    "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("h54m   v1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("19.0")]),t._v("\nk8s"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("node2     Ready    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("    "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("h54m   v1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("19.0")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br")])]),e("h2",{attrs:{id:"_1-3-kubeconfig配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-kubeconfig配置文件"}},[t._v("#")]),t._v(" 1.3 kubeconfig配置文件")]),t._v(" "),e("ul",[e("li",[t._v("kubectl使用kubeconfig认证文件连接K8s集群， 使用kubectl  config指令生成kubeconfig文件")]),t._v(" "),e("li",[t._v("了解一下基本结构即可")])]),t._v(" "),e("p",[e("img",{staticStyle:{width:"600px","margin-left":"20px"},attrs:{src:a(644)}})]),t._v(" "),e("h1",{attrs:{id:"_02-牛刀小试-快速部署一个网站"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_02-牛刀小试-快速部署一个网站"}},[t._v("#")]),t._v(" 02.牛刀小试-快速部署一个网站")]),t._v(" "),e("h2",{attrs:{id:"_2-1-使用k8s集群部署一个网站"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-使用k8s集群部署一个网站"}},[t._v("#")]),t._v(" 2.1 使用k8s集群部署一个网站")]),t._v(" "),e("ul",[e("li",[t._v("使用docker构建了一个镜像，并把这个镜像推送到了 docker-hub 公用的镜像仓库中")])]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("master "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# docker pull lizhenliang"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("java"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("demo       # 测试一下，镜像是否可以被拉取\n"),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.使用Deployment控制器部署镜像'")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("master "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# kubectl create deployment web "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("image"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("lizhenliang"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("java"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("demo \n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("master "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# kubectl "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" deploy"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("pods              # 查看镜像是否在部署\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NAME")]),t._v("                  "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("READY")]),t._v("   "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("STATUS")]),t._v("    "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("RESTARTS")]),t._v("   "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AGE")]),t._v("\npod"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("6799")]),t._v("fc88d8"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("sz6l   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("h31m\npod"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("web"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("674477549")]),t._v("d"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("snfqx    "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("        "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("m26s\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("master "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# kubectl describe pod web"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("674477549")]),t._v("d"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("snfqx    # 查看镜像部署详细过程\n\n"),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2.使用Service将Pod暴露出去'")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("master "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# kubectl expose deployment web "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("port"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("target"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("port"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("type"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("NodePort\n\n"),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'3.访问应用  '")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" \n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("master "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# kubectl "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" svc    # 端口随机生成，通过"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" svc获取\n"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NAME")]),t._v("        "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TYPE")]),t._v("       "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CLUSTER")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IP")]),t._v("      "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("EXTERNAL")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IP")]),t._v("   "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PORT")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("S")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("      "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AGE")]),t._v("\nweb         NodePort    "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.96")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v(".215")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v(".154")]),t._v("    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("      "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("32610")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TCP")]),t._v("   "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v("s\nhttp"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("NodeIP"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("Port   "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v("》  http"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token regex"}},[e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("192.168.56.62:32610")]),e("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br")])]),e("h2",{attrs:{id:"_2-2-镜像分类"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-镜像分类"}},[t._v("#")]),t._v(" 2.2 镜像分类")]),t._v(" "),e("ul",[e("li",[t._v("基础镜像，例如centos、ubuntu")]),t._v(" "),e("li",[t._v("环境镜像，例如jdk、nginx")]),t._v(" "),e("li",[t._v("项目镜像，例如kubernetesui/dashboard")])]),t._v(" "),e("h1",{attrs:{id:"_03-kubectl管理工具命令概要"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_03-kubectl管理工具命令概要"}},[t._v("#")]),t._v(" 03.kubectl管理工具命令概要")]),t._v(" "),e("h2",{attrs:{id:"_3-1-安装kubectl命令行管理工具补全插件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-安装kubectl命令行管理工具补全插件"}},[t._v("#")]),t._v(" 3.1 安装kubectl命令行管理工具补全插件")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("master "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# yum "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("y install  bash"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("completion\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("master "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# source "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("kubectl completion bash"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("master "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# kubectl create deployment           # 使用下面命令测试是否可以使用tab键补全\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("h2",{attrs:{id:"_3-2-kubectl常用命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-kubectl常用命令"}},[t._v("#")]),t._v(" 3.2 kubectl常用命令")]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("kubectl "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" pods "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("show"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("labels      # 查看标签\nkubectl "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" pods "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("l app"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nginx      # 根据标签查询资源\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("功能说明")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("命令")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("node")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("查看服务器节点")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("kubectl get nodes")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("查看服务器节点详情")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("kubectl get nodes -o wide")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("节点打标签")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("kubectl label nodes <节点名称> labelName=<标签名称>")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("查看节点标签")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("kubectl get node --show-labels")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("删除节点标签")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("kubectl label  node <节点名称> labelName-")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("pod")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("查看pod节点")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("kubectl get pod")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("查看pod节点详情")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("kubectl get pod -o wide")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("查看所有名称空间下的pod")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("kubectl get pod --all-namespaces")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("根据yaml文件创建pod")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("kubectl apply -f <文件名称>")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("根据yaml文件删除pod")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("kubectl delete -f <文件名称>")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("删除pod节点")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("kubectl delete pod <pod名称> -n <名称空间>")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("查看异常的pod节点")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("kubectl get pods -n <名称空间> | grep -v Running")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("查看异常pod节点的日志")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("kubectl describe pod <pod名称> -n <名称空间>")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("svc")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("查看服务")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("kubectl get svc")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("查看服务详情")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("kubectl get svc -o wide")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("查看所有名称空间下的服务")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("kubectl get svc --all-namespaces")])])])])])}),[],!1,null,null,null);s.default=r.exports}}]);