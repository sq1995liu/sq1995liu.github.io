(window.webpackJsonp=window.webpackJsonp||[]).push([[284],{972:function(s,a,t){"use strict";t.r(a);var r=t(21),e=Object(r.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"_01-角色-roles"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_01-角色-roles"}},[s._v("#")]),s._v(" 01.角色(roles)")]),s._v(" "),t("h2",{attrs:{id:"_1-1-什么场景下会用roles？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-什么场景下会用roles？"}},[s._v("#")]),s._v(" 1.1 什么场景下会用roles？")]),s._v(" "),t("ul",[t("li",[s._v("假如我们现在有3个被管理主机，第一个要配置成httpd，第二个要配置成php服务器，第三个要配置成MySQL服务器。")]),s._v(" "),t("li",[s._v("只能，第一个play用到第一个主机上，用来构建httpd，第二个play用到第二个主机上，用来构建php，第三个play用到第三个主机上，用来构建MySQL")]),s._v(" "),t("li",[s._v("这些个play定义在playbook中比较麻烦，将来也不利于模块化调用，不利于多次调用")]),s._v(" "),t("li",[s._v("比如说后来又加进来一个主机，这个第4个主机既是httpd服务器，又是php服务器，我们只能写第4个play，上面写上安装httpd和php。")]),s._v(" "),t("li",[s._v("这样playbook中的代码就重复了。")]),s._v(" "),t("li",[t("code",[s._v("为了避免代码重复，roles能够实现代码重复被调用。")])])]),s._v(" "),t("h2",{attrs:{id:"_1-2-roles目录结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-roles目录结构"}},[s._v("#")]),s._v(" 1.2 roles目录结构")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("site"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml\nwebservers"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml\nfooservers"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml\nhosts\n\nroles"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n  common"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("    # 用于存放公共资源的地方，比如几个模块都需要使用的 变量等\n    tasks"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("            # tasks "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 包含角色要执行的主要任务列表\n    files"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("            # files "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 角色部署时用到的文件\n    templates"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("        # templates "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 角色部署时用到的模板\n    handlers"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("         # handlers "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 包含角色使用的处理程序\n    vars"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("             # vars "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 角色其他的变量\n    defaults"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("         # defaults "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 角色默认的变量\n    meta"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("             # meta "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 角色定义的一些元数据\n  webservers"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n    files"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n    templates"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n    tasks"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n    handlers"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n    vars"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);