(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{459:function(s,t){s.exports="data:image/png;base64,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"},460:function(s,t,n){s.exports=n.p+"assets/img/image-20201005141004241.c68d7a85.png"},461:function(s,t,n){s.exports=n.p+"assets/img/image-20201005134822521.2e9101b5.png"},462:function(s,t,n){s.exports=n.p+"assets/img/image-20201005135211140.61ed41af.png"},463:function(s,t,n){s.exports=n.p+"assets/img/image-20201005145547397.da831f5c.png"},836:function(s,t,n){"use strict";n.r(t);var a=n(21),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"_1-cookie使用和优缺点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-cookie使用和优缺点"}},[s._v("#")]),s._v(" 1.COOKIE使用和优缺点")]),s._v(" "),a("p",[s._v("https://www.cnblogs.com/xiaonq/p/11094480.html")]),s._v(" "),a("h3",{attrs:{id:"_1-1-cookie原理：用户名-密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-cookie原理：用户名-密码"}},[s._v("#")]),s._v(" 1.1 cookie原理："),a("code",[s._v("用户名+密码")])]),s._v(" "),a("ul",[a("li",[s._v("cookie是保存在用户浏览器端，用户名和密码等明文信息")])]),s._v(" "),a("p",[a("img",{staticStyle:{width:"500px","margin-left":"50px"},attrs:{src:n(459)}})]),s._v(" "),a("h3",{attrs:{id:"_1-2-session使用原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-session使用原理"}},[s._v("#")]),s._v(" 1.2 session使用原理")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("session是存储在服务器端的一段字符串,相当于字典的key")])])]),s._v(" "),a("p",[a("img",{staticStyle:{width:"700px","margin-left":"50px"},attrs:{src:n(460)}})]),s._v(" "),a("ul",[a("li",[s._v("1.用户向服务器发送用户名和密码。")]),s._v(" "),a("li",[s._v("2.验证服务器后，相关数据（如用户角色，登录时间等）将保存在当前会话中。")]),s._v(" "),a("li",[s._v("3.服务器向用户返回session_id，session信息都会写入到用户的Cookie。")]),s._v(" "),a("li",[s._v("4.用户的每个后续请求都将通过在Cookie中取出session_id传给服务器。")]),s._v(" "),a("li",[s._v("5.服务器收到session_id并对比之前保存的数据，确认用户的身份。")])]),s._v(" "),a("p",[a("img",{staticStyle:{width:"600px","margin-left":"50px"},attrs:{src:n(461)}})]),s._v(" "),a("h3",{attrs:{id:"_1-3-session使用缺点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-session使用缺点"}},[s._v("#")]),s._v(" 1.3 session使用缺点")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("CPU\n主板\n显卡\n内存条（把硬盘中的程序读取到内存中，就变成了进程）\n硬盘（1T， 500G）（可运行的代码存储在硬盘中，就是程序）\nIO操作（把硬盘中或者网络中的数据读取到内存中就是IO操作）\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("ul",[a("li",[a("code",[s._v("session默认存储在登录的那台服务器的内存中。")])]),s._v(" "),a("li",[s._v("1.这种模式最大的问题是，没有分布式架构，无法支持横向扩展。")]),s._v(" "),a("li",[s._v("2.如果使用一个服务器，该模式完全没有问题。")]),s._v(" "),a("li",[s._v("3.但是，如果它是服务器群集或面向服务的跨域体系结构的话，则需要一个统一的session数据库库来保存会话数据实现共享，")]),s._v(" "),a("li",[s._v("4.这样负载均衡下的每个服务器才可以正确的验证用户身份。")])]),s._v(" "),a("h3",{attrs:{id:"_1-4-常用解决session方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-常用解决session方法"}},[s._v("#")]),s._v(" 1.4 常用解决session方法")]),s._v(" "),a("ul",[a("li",[s._v("1.一种解决方案是通过持久化session数据，写入数据库或文件持久层等。")]),s._v(" "),a("li",[s._v("2.收到请求后，验证服务从持久层请求数据。")]),s._v(" "),a("li",[s._v("3.依赖于持久层的数据库或者问题系统，会有单点风险，如果持久层失败，整个认证体系都会挂掉。")])]),s._v(" "),a("p",[a("img",{staticStyle:{width:"600px","margin-left":"50px"},attrs:{src:n(462)}})]),s._v(" "),a("ul",[a("li",[s._v("第一种：没有session持久化\n"),a("ul",[a("li",[s._v("没有分布式架构，无法支持横向扩展")]),s._v(" "),a("li",[s._v("session默认存储在内存中，如果把代码部署在多台机器上，session保存到了其中某一台机器的内存中")]),s._v(" "),a("li",[s._v("用户如果在A机器上登录，只有A机器的内存中存了这个session的key，如果请求nginx路由到B机器，B机器内存中没有这个session数据，就需要从新登录")])])]),s._v(" "),a("li",[s._v("第二种：写入数据库或文件持久层（"),a("code",[s._v("session+redis")]),s._v("）\n"),a("ul",[a("li",[s._v("解决了横向扩展问题")]),s._v(" "),a("li",[s._v("数据库持久层出现问题，所有集群都没办法登录，"),a("code",[s._v("单点故障")])]),s._v(" "),a("li",[s._v("如果数据放到mysql中，用户量过大，查询很慢，效率很低")])])])]),s._v(" "),a("h1",{attrs:{id:"_2-jwt介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-jwt介绍"}},[s._v("#")]),s._v(" 2. JWT介绍")]),s._v(" "),a("h3",{attrs:{id:"_2-1-jwt原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-jwt原理"}},[s._v("#")]),s._v(" 2.1 jwt原理")]),s._v(" "),a("ul",[a("li",[s._v("最简单理解：jwt本质就是，"),a("code",[s._v("把用户信息通过加密后生成的一个字符串")])])]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("JWT的原则是在服务器身份验证之后，将生成一个JSON对象并将其发送回用户\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"UserName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Chongchong"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Role"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Admin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Expire"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2018-08-08 20:15:56"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n之后，当用户与服务器通信时，客户在请求中发回JSON对象，服务器仅依赖于这个JSON对象来标识用户。\n为了防止用户篡改数据，服务器将在生成对象时添加签名（有关详细信息，请参阅下文）。\n服务器不保存任何会话数据，即服务器变为无状态，使其更容易扩展\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h3",{attrs:{id:"_2-2-jwt的数据结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-jwt的数据结构"}},[s._v("#")]),s._v(" 2.2 JWT的数据结构")]),s._v(" "),a("ul",[a("li",[s._v("1）jwt头：JWT头部分是一个描述JWT元数据的JSON对象")]),s._v(" "),a("li",[s._v("2）有效载荷：七个默认字段+自定义私有字段（用户信息）")]),s._v(" "),a("li",[s._v("3）签名=HMACSHA256("),a("code",[s._v("base64UrlEncode(header)")]),s._v(' + "." + '),a("code",[s._v("base64UrlEncode(payload)")]),s._v(",secret)")])]),s._v(" "),a("p",[a("img",{staticStyle:{width:"600px","margin-left":"50px"},attrs:{src:n(463)}})]),s._v(" "),a("blockquote",[a("p",[s._v("第一部分："),a("code",[s._v("JWT头")])])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("base64UrlEncode(header)")]),s._v("---\x3e字符串")])]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# JWT头部分是一个描述JWT元数据的JSON对象，通常如下所示。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"alg"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"HS256"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"typ"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"JWT"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1）alg属性表示签名使用的算法，默认为HMAC SHA256（写为HS256）；")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2）typ属性表示令牌的类型，JWT令牌统一写为JWT。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3）最后，使用Base64 URL算法将上述JSON对象转换为字符串保存。")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("blockquote",[a("p",[s._v("第二部分："),a("code",[s._v("有效载荷")]),s._v("   没有敏感数据的用户信息")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("base64UrlEncode(payload)")]),s._v("---\x3e字符串")])]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1、有效载荷部分，是JWT的主体内容部分，也是一个JSON对象，包含需要传递的数据。 JWT指定七个默认字段供选择。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v("'''\niss：发行人\nexp：到期时间\nsub：主题\naud：用户\nnbf：在此之前不可用\niat：发布时间\njti：JWT ID用于标识该JWT\n'''")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2、除以上默认字段外，我们还可以自定义私有字段，如下例：")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sub"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1234567890"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"chongchong"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" true\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3、注意")]),s._v("\n默认情况下JWT是未加密的，任何人都可以解读其内容，因此不要构建隐私信息字段，存放保密信息，以防止信息泄露。\nJSON对象也使用Base64 URL算法转换为字符串保存。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("blockquote",[a("p",[s._v("第三部分："),a("code",[s._v("签名哈希")])])]),s._v(" "),a("ul",[a("li",[s._v("签名=HMACSHA256("),a("code",[s._v("base64UrlEncode(header)")]),s._v(' + "." + '),a("code",[s._v("base64UrlEncode(payload)")]),s._v(",secret)")])]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1.签名哈希部分是对上面两部分数据签名，通过指定的算法生成哈希，以确保数据不会被篡改。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2.首先，需要指定一个密码（secret），该密码仅仅为保存在服务器中，并且不能向用户公开。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3.然后，使用标头中指定的签名算法（默认情况下为HMAC SHA256）根据以下公式生成签名。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 4.HMACSHA256(base64UrlEncode(header) + "." + base64UrlEncode(payload),secret)')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 5.在计算出签名哈希后，JWT头，有效载荷和签名哈希的三个部分组合成一个字符串，每个部分用"."分隔，就构成整个JWT对象。')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"_2-3-jwt核心"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-jwt核心"}},[s._v("#")]),s._v(" 2.3 jwt核心")]),s._v(" "),a("ul",[a("li",[s._v("1）给用户颁发的token值相当于一把锁，服务器端的秘钥相当于一把钥匙")]),s._v(" "),a("li",[s._v("2）每次客户端请求都会携带这把锁，服务器端用秘钥去开这把锁，若果无法打开就证明是伪造的")])]),s._v(" "),a("h3",{attrs:{id:"_2-4-jwt特点分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-jwt特点分析"}},[s._v("#")]),s._v(" 2.4 jwt特点分析")]),s._v(" "),a("ul",[a("li",[s._v("1、JWT的最大缺点是服务器不保存会话状态，所以在使用期间不可能取消令牌或更改令牌的权限，一旦JWT签发，在有效期内将会一直有效。")]),s._v(" "),a("li",[s._v("2、JWT本身包含认证信息，因此一旦信息泄露，任何人都可以获得令牌的所有权限。")]),s._v(" "),a("li",[s._v("3、为了减少盗用和窃取，JWT不建议使用HTTP协议来传输代码，而是使用加密的HTTPS协议进行传输。")]),s._v(" "),a("li",[s._v("4、JWT不仅可用于认证，还可用于信息交换，善用JWT有助于减少服务器请求数据库的次数。")])])])}),[],!1,null,null,null);t.default=e.exports}}]);