(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{333:function(s,t,a){s.exports=a.p+"assets/img/image-20201020140610582.20495da4.png"},900:function(s,t,a){"use strict";a.r(t);var n=a(21),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"_1-django的settings配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-django的settings配置"}},[s._v("#")]),s._v(" 1.django的settings配置")]),s._v(" "),n("p",[s._v("https://www.cnblogs.com/xiaonq/p/8932266.html")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1.修改配置")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 正式上线关闭调试模式, 不会暴露服务器信息")]),s._v("\nDEBUG "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("False")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2.允许的主机")]),s._v("\nALLOWED_HOSTS "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxx.com'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'127.0.0.1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3.前端修改接口地址（vue）")]),s._v("\nhttp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("//")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".56")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8888")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  http"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("//")]),s._v("xxx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 4.MySQL数据库根据实际情况配置（注意地址）")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 5.缓存配置, 改为默认, 最简单形式（配置redis）")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 6.收集静态文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 静态资源收集位置")]),s._v("\nSTATIC_ROOT "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" os"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("join"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("BASE_DIR"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'static'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 7.命令行执行")]),s._v("\npython manage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py collectstatic\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("h1",{attrs:{id:"_2-安装uwsgi-配置uwsgi"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装uwsgi-配置uwsgi"}},[s._v("#")]),s._v(" 2.安装uwsgi 配置uWSGI")]),s._v(" "),n("h3",{attrs:{id:"_2-1-安装uwsgi"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-安装uwsgi"}},[s._v("#")]),s._v(" 2.1 安装uwsgi")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v("'''1. 安装uwsgi'''")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# workon syl")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pip3 install uwsgi     # 安装uwsgi")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# whereis uwsgi          # 查看uwsgi安装路径")]),s._v("\nuwsgi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("root"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("virtualenvs"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("syl"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("bin")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("uwsgi\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h3",{attrs:{id:"_2-2-配置uwgsi-ini启动文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-配置uwgsi-ini启动文件"}},[s._v("#")]),s._v(" 2.2 配置uwgsi.ini启动文件")]),s._v(" "),n("p",[n("img",{staticStyle:{width:"700px","margin-left":"50px"},attrs:{src:a(333)}})]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("1.每个请求处理时间为0.5s？\n2.当前配置QPS是多少？（每秒能处理的请求数量）\nQPS就是160\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("ul",[n("li",[s._v("在"),n("code",[s._v("uwsgi_conf/uwsgi.ini")]),s._v("下新建这个文件")])]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim uwsgi_conf/uwsgi.ini")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("uwsgi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用Nginx连接时使用，Django程序所在服务器地址和端口号")]),s._v("\nsocket"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8000")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目目录绝对路径")]),s._v("\nchdir"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("teach"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("shiyanlou_project"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("syl\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 项目中wsgi.py文件的目录，相对于项目目录")]),s._v("\nwsgi"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("file")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("syl"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wsgi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("py\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进程数（机器核数的1倍）")]),s._v("\nprocesses"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 线程数")]),s._v("\nthreads"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uwsgi服务器的角色")]),s._v("\nmaster"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 存放进程编号的文件")]),s._v("\npidfile"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("uwsgi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pid\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 日志文件")]),s._v("\ndaemonize"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("uwsgi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定依赖的虚拟环境")]),s._v("\nvirtualenv"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("root"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("virtualenvs"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("syl\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("h3",{attrs:{id:"_2-3-使用uwsgi启动django：一定要在这个项目目录中"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-使用uwsgi启动django：一定要在这个项目目录中"}},[s._v("#")]),s._v(" 2.3 使用uwsgi启动django：一定要在这个项目目录中")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("测试命令，和我们下面没有任何关系")])])]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v("'''3. 使用uwsgi启动django：一定要在这个项目目录中'''")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uwsgi --http 192.168.56.100:6666 --file syl/wsgi.py --static-map=/static=static")]),s._v("\n访问项目：http"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("//")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".56")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".11")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h1",{attrs:{id:"_3-安装配置nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装配置nginx"}},[s._v("#")]),s._v(" 3.安装配置nginx")]),s._v(" "),n("h3",{attrs:{id:"_3-1-安装nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-安装nginx"}},[s._v("#")]),s._v(" 3.1 安装nginx")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sudo apt update                  # 更新apt")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sudo apt install nginx           # 安装nginx")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sudo systemctl status nginx      # 查看nginx状态")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"_3-2-配置nginx-uwsgi启动"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-配置nginx-uwsgi启动"}},[s._v("#")]),s._v(" 3.2  配置nginx+uwsgi启动")]),s._v(" "),n("ul",[n("li",[s._v("在"),n("code",[s._v("/etc/nginx/conf.d/")]),s._v("文件夹下新建任意名字 xxx.conf即可，写入的内容是官方给的")])]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[s._v("# "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("django"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf\nserver "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    listen       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8888")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    server_name  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".56")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        # "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("teach"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("shiyanlou_project"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("syl"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("admin"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("css"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("base"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("css\n        # http"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".56")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".100")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("admin"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("css"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("base"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("css\n        location "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("   \n            alias "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("teach"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("shiyanlou_project"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("syl"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n        location "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n              include uwsgi_params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n              uwsgi_pass "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n              uwsgi_ignore_client_abort on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("h3",{attrs:{id:"_3-3-etc-nginx-nginx-confnginx主配置文件解读-不用变"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-etc-nginx-nginx-confnginx主配置文件解读-不用变"}},[s._v("#")]),s._v(" 3.3  "),n("code",[s._v("/etc/nginx/nginx.conf")]),s._v("nginx主配置文件解读("),n("code",[s._v("不用变")]),s._v(")")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[s._v("user www"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nworker_processes auto"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\npid "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("run"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\ninclude "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("modules"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("enabled"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nevents "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tworker_connections "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("768")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("      "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 链接数量")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nhttp "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tsendfile on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\ttcp_nopush on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\ttcp_nodelay on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\tkeepalive_timeout "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("65")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\ttypes_hash_max_size "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\n\taccess_log "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("var"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("access"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1.客户浏览器访问nginx服务记录（客户户端访问异常时可以查看）")]),s._v("\n\terror_log "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("var"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("           "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2.nginx错误日志（nginx启动时报错的日志）")]),s._v("\n\tinclude "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("             "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3.nginx扩展配置文件")]),s._v("\n\tinclude "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sites"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("enabled"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("h1",{attrs:{id:"_4-uwsgi和nginx-启动、关闭、查看日志"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-uwsgi和nginx-启动、关闭、查看日志"}},[s._v("#")]),s._v(" 4. uwsgi和nginx 启动、关闭、查看日志")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v("'''1.启动并查看nginx日志'''")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node1 demo2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl restart nginx         # 开启nginx")]),s._v("\nroot@dev"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("uwsgi_conf"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tail -f /var/log/nginx/access.log    # 查看nginx接入日志")]),s._v("\nroot@dev"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("uwsgi_conf"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tail -f /var/log/nginx/error.log     # 查看nginx错误日志")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v("'''2.启动并查看uwsgi日志'''")]),s._v("\nroot@dev"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("uwsgi_conf"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /teach/shiyanlou_project/uwsgi_conf     # 进入实验楼目录")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node1 demo2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uwsgi --ini uwsgi.ini                 # 启动uwsgi的django项目")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# http://192.168.56.100:8888/ 访问项目")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@linux"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node1 demo2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uwsgi --stop uwsgi.pid                # 关闭uwsgi")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@dev"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("uwsgi_conf"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tail -f uwsgi.log                         # 查看uwsgi日志")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("syl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" root@dev"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("uwsgi_conf"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps -ef|grep uwsgi       # 查看uwsgi服务是否启动")]),s._v("\nroot      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("92328")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("89266")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("37")]),s._v(" pts"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("00")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("00")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("00")]),s._v(" grep "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("color"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("auto uwsgi\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("syl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" root@dev"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("uwsgi_conf"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# netstat -anptu | grep 8888     # 查看8888端口被哪一个程序占用")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);