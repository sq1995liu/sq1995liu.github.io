(window.webpackJsonp=window.webpackJsonp||[]).push([[129],{603:function(t,a,s){t.exports=s.p+"assets/img/image-20210207100907372.41e1b3f9.png"},968:function(t,a,s){"use strict";s.r(a);var r=s(21),n=Object(r.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"自动部署tomcat"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#自动部署tomcat"}},[t._v("#")]),t._v(" 自动部署Tomcat")]),t._v(" "),r("h2",{attrs:{id:"_01-部署文件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_01-部署文件"}},[t._v("#")]),t._v(" 01.部署文件")]),t._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("node2 "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# vim tomcat"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("palybook"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yaml\n")])]),t._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[t._v("1")]),r("br")])]),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" hosts"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" webservers \n  gather_facts"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" no\n  vars"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    tomcat_version"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.5")]),r("span",{pre:!0,attrs:{class:"token number"}},[t._v(".61")]),t._v("\n    tomcat_install_dir"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local\n  tasks"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Install jdk1"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("  #### 第一：安装 jdk 环境\n      yum"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("java"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.8")]),r("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("openjdk state"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("present\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Download tomcat  #### 第二：下载 Tomcat\n      get_url"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" url"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("http"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mirrors"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hust"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("edu"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cn"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("apache"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tomcat"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tomcat"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("v"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" tomcat_version "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bin"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("apache"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("tomcat"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" tomcat_version "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tar"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gz dest"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tmp\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Unarchive tomcat"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" tomcat_version "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tar"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gz  #### 第三：Tomcat是二进制包，解压即可使用\n      unarchive"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n        src"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tmp"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("apache"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("tomcat"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" tomcat_version "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tar"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gz \n        dest"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{{ tomcat_install_dir }}"')]),t._v("\n        copy"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" no     # 如果是yes，ansible会到目标机器本地区拷贝，no 就会通过ansible服务机器上拷贝\n\n    "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Start tomcat   #### 第四：启动 Tomcat\n      shell"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" cd "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" tomcat_install_dir "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n        mv apache"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("tomcat"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" tomcat_version "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" tomcat8 "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n        cd tomcat8"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bin "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" nohup "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("startup"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sh "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n")])]),t._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[t._v("1")]),r("br"),r("span",{staticClass:"line-number"},[t._v("2")]),r("br"),r("span",{staticClass:"line-number"},[t._v("3")]),r("br"),r("span",{staticClass:"line-number"},[t._v("4")]),r("br"),r("span",{staticClass:"line-number"},[t._v("5")]),r("br"),r("span",{staticClass:"line-number"},[t._v("6")]),r("br"),r("span",{staticClass:"line-number"},[t._v("7")]),r("br"),r("span",{staticClass:"line-number"},[t._v("8")]),r("br"),r("span",{staticClass:"line-number"},[t._v("9")]),r("br"),r("span",{staticClass:"line-number"},[t._v("10")]),r("br"),r("span",{staticClass:"line-number"},[t._v("11")]),r("br"),r("span",{staticClass:"line-number"},[t._v("12")]),r("br"),r("span",{staticClass:"line-number"},[t._v("13")]),r("br"),r("span",{staticClass:"line-number"},[t._v("14")]),r("br"),r("span",{staticClass:"line-number"},[t._v("15")]),r("br"),r("span",{staticClass:"line-number"},[t._v("16")]),r("br"),r("span",{staticClass:"line-number"},[t._v("17")]),r("br"),r("span",{staticClass:"line-number"},[t._v("18")]),r("br"),r("span",{staticClass:"line-number"},[t._v("19")]),r("br"),r("span",{staticClass:"line-number"},[t._v("20")]),r("br"),r("span",{staticClass:"line-number"},[t._v("21")]),r("br"),r("span",{staticClass:"line-number"},[t._v("22")]),r("br"),r("span",{staticClass:"line-number"},[t._v("23")]),r("br")])]),r("h2",{attrs:{id:"_02-部署"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_02-部署"}},[t._v("#")]),t._v(" 02.部署")]),t._v(" "),r("ul",[r("li",[t._v("执行部署 Tomcat")])]),t._v(" "),r("div",{staticClass:"language-javascript line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("node2 "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# ansible"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("playbook tomcat"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("palybook"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yaml "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("syntax"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("check       # 语法检查\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@k8s"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("node2 "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# ansible"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("playbook tomcat"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("palybook"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yaml                 # 执行\n")])]),t._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[t._v("1")]),r("br"),r("span",{staticClass:"line-number"},[t._v("2")]),r("br")])]),r("ul",[r("li",[t._v("查看Tomcat是否运行")])]),t._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("[root@k8s-node2 ~]# ls /usr/local/tomcat8/\n[root@k8s-node2 ~]# ps -ef|grep tomcat\n")])]),t._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[t._v("1")]),r("br"),r("span",{staticClass:"line-number"},[t._v("2")]),r("br")])]),r("ul",[r("li",[t._v("访问Tomcat")])]),t._v(" "),r("p",[r("img",{staticStyle:{width:"400px","margin-left":"50px"},attrs:{src:s(603)}})])])}),[],!1,null,null,null);a.default=n.exports}}]);