(window.webpackJsonp=window.webpackJsonp||[]).push([[130],{606:function(s,a,t){s.exports=t.p+"assets/img/image-20210207151422364.2b75b5c5.png"},971:function(s,a,t){"use strict";t.r(a);var n=t(21),r=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"_01-部署lnmp"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_01-部署lnmp"}},[s._v("#")]),s._v(" 01.部署lnmp")]),s._v(" "),n("h2",{attrs:{id:"_1-1-lnmp说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-lnmp说明"}},[s._v("#")]),s._v(" 1.1 lnmp说明")]),s._v(" "),n("ul",[n("li",[s._v("这里主要是一键部署PHP和nginx")]),s._v(" "),n("li",[s._v("MySQL在架构中已经有了，就不部署了")])]),s._v(" "),n("p",[n("img",{staticStyle:{width:"900px","margin-left":"50px"},attrs:{src:t(606)}})]),s._v(" "),n("h2",{attrs:{id:"_1-2-了解部署架构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-了解部署架构"}},[s._v("#")]),s._v(" 1.2 了解部署架构")]),s._v(" "),n("h2",{attrs:{id:"_02-目录结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_02-目录结构"}},[s._v("#")]),s._v(" 02.目录结构")]),s._v(" "),n("h3",{attrs:{id:"_12-1-1-创建目录结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_12-1-1-创建目录结构"}},[s._v("#")]),s._v(" 12.1.1 创建目录结构")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# tree nginx_php\nnginx_php\n├── group_vars\n├── hosts\n├── roles\n│   ├── common\n│   │   └── tasks\n│   ├── nginx\n│   │   ├── files\n│   │   ├── handlers\n│   │   ├── tasks\n│   │   └── templates\n│   ├── php\n│   │   ├── files\n│   │   ├── handlers\n│   │   └── tasks\n│   └── wordpress\n│       ├── tasks\n│       └── templates\n├── site"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("retry\n└── site"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("h3",{attrs:{id:"_12-1-2-最终文件如下"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_12-1-2-最终文件如下"}},[s._v("#")]),s._v(" 12.1.2 最终文件如下")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# tree nginx_php\nnginx_php\n├── group_vars\n│   └── all\n├── hosts\n├── roles\n│   ├── common\n│   │   └── tasks\n│   │       └── main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml\n│   ├── nginx\n│   │   ├── files\n│   │   │   ├── nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.15")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz\n│   │   │   ├── nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf\n│   │   │   └── nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service\n│   │   ├── handlers\n│   │   │   └── main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml\n│   │   ├── tasks\n│   │   │   └── main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml\n│   │   └── templates\n│   │       └── wordpress"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf\n│   ├── php\n│   │   ├── files\n│   │   │   ├── php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.6")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".38")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz\n│   │   │   ├── php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf\n│   │   │   ├── php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service\n│   │   │   └── php"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ini\n│   │   ├── handlers\n│   │   │   └── main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml\n│   │   └── tasks\n│   │       └── main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml\n│   └── wordpress\n│       ├── tasks\n│       │   └── main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml\n│       └── templates\n│           └── wp"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("php\n├── site"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("retry\n└── site"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br")])]),n("h1",{attrs:{id:"_03-nginx-php下配置文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_03-nginx-php下配置文件"}},[s._v("#")]),s._v(" 03.nginx_php下配置文件")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# tree nginx_php\nnginx_php\n├── group_vars\n│   └── all\n├── hosts\n├── site"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("retry\n└── site"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"_3-1-hosts"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-hosts"}},[s._v("#")]),s._v(" 3.1 hosts")]),s._v(" "),n("ul",[n("li",[s._v("被控制主机列表")])]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 nginx_php"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# cat hosts \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("webservers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".56")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".65")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"_3-2-site-yml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-site-yml"}},[s._v("#")]),s._v(" 3.2 site.yml")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 nginx_php"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# cat site"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml \n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Install Nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PHP")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("FPM")]),s._v(" and Wordpress\n  hosts"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" webservers\n  remote_user"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" root\n\n  roles"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" role"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" common\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" role"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" nginx\n      tags"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" role"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" php\n      tags"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"php"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" role"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" wordpress\n      tags"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"wp"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("h2",{attrs:{id:"_3-3-site-retry"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-site-retry"}},[s._v("#")]),s._v(" 3.3 site.retry")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 nginx_php"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# cat site"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("retry \n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".56")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".65")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"_3-4-group-vars-all"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-group-vars-all"}},[s._v("#")]),s._v(" 3.4 group_vars/all")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 group_vars"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# cat all \n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("\n# Nginx\nnginx_version"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.15")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),s._v(" \nhttp_port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\nserver_name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" wp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ctnrs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com\n\n# "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PHP")]),s._v("\nphp_version"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.6")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".38")]),s._v("\n\n# Wordpress \nwp_version"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.9")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".4")]),s._v("\ndb_host"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".56")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".65")]),s._v("\ndb_port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\nwp_db_name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" wp\nwp_db_user"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" wp\nwp_db_password"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" MyNewPass4"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("h1",{attrs:{id:"_04-roles-common"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_04-roles-common"}},[s._v("#")]),s._v(" 04.roles/common")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[root@k8s-node2 ~]# tree nginx_php\n├── roles\n│   ├── common\n│   │   └── tasks\n│   │       └── main.yml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h2",{attrs:{id:"_4-1-roles-common-tasks-main-yml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-roles-common-tasks-main-yml"}},[s._v("#")]),s._v(" 4.1 roles/common/tasks/main.yml")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("提前安装好编译需要的依赖包：gcc、make 等")])]),s._v(" "),n("li",[s._v("使用for循环安装")])]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 tasks"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# cat main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml    # 提前安装好编译需要的依赖包：gcc、make 等\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Install deps\n  yum"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" item "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" state"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("present\n  with_items"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" gcc\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" make\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" zlib"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("devel\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" openssl"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("devel\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" pcre"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("devel\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h1",{attrs:{id:"_05-roles-nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_05-roles-nginx"}},[s._v("#")]),s._v(" 05.roles/nginx")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 roles"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# tree nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\nnginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n├── files\n│   ├── nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.15")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz\n│   ├── nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf\n│   └── nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service\n├── handlers\n│   └── main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml\n├── tasks\n│   └── main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml\n└── templates\n    └── wordpress"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h2",{attrs:{id:"_5-1-tasks-main-yml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-tasks-main-yml"}},[s._v("#")]),s._v(" 5.1 tasks/main.yml")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# cat tasks"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml \n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Copy nginx source pkg\n  #get_url"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" url"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("org"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("download"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" nginx_version "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz dest"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tmp"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" nginx_version "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz\n  copy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" src"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" nginx_version "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz dest"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tmp\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Install nginx\n  shell"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" cd "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tmp "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n         tar zxf nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" nginx_version "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n         cd nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" nginx_version "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n         "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("configure "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("prefix"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("user"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nobody "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("group"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nobody \n         "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("http_ssl_module "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("http_stub_status_module "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("stream"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("dynamic "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" \n         make "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" make install\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Mkdir "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("vhost\n  file"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" dest"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("vhost state"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("directory\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Copy nginx master configuration file\n  copy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" src"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf dest"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf\n  notify"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" \n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" reload systemd\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" reload nginx\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Copy nginx configuration "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" wordpress\n  template"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" src"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("wordpress"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf dest"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("vhost"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n  notify"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" reload systemd\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" reload nginx\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Copy nginx systemctl service \n  copy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" src"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service dest"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("systemd"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("system"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Start service\n  service"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx state"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("started enabled"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br")])]),n("h2",{attrs:{id:"_5-2-handlers-main-yml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-handlers-main-yml"}},[s._v("#")]),s._v(" 5.2 handlers/main.yml")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# cat handlers"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml \n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" reload systemd\n  command"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" systemctl daemon"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("reload\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" reload nginx\n  service"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx state"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("reloaded\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h2",{attrs:{id:"_5-3-files-nginx-conf"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-files-nginx-conf"}},[s._v("#")]),s._v(" 5.3 files/nginx.conf")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 roles"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# cat nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("files"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf \nuser  nobody"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nworker_processes  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nerror_log  logs"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log  info"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\npid        "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("run"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nevents "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    worker_connections  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nhttp "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    include       mime"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("types"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    include       vhost"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('/*.conf;\n\n    default_type  application/octet-stream;\n    log_format  main  \'$remote_addr - $remote_user [$time_local] "$request" \'\n                      \'$status $body_bytes_sent "$http_referer" \'\n                      \'"$http_user_agent" "$http_x_forwarded_for"\';\n\n    sendfile        on;\n    tcp_nopush     on;\n    keepalive_timeout  65;\n}\n')])])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("h2",{attrs:{id:"_5-4-files-nginx-service"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-files-nginx-service"}},[s._v("#")]),s._v(" 5.4 files/nginx.service")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 files"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# cat nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nDescription"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("The "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NGINX")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HTTP")]),s._v(" and reverse proxy server\nAfter"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("syslog"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("target network"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("target remote"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("target nss"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("lookup"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("target\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nType"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("forking\nPIDFile"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("run"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pid\nExecStartPre"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("t\nExecStart"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx\nExecReload"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("s reload\nExecStop"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("kill "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("s "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("QUIT")]),s._v(" $"),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MAINPID")]),s._v("\nPrivateTmp"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nWantedBy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("multi"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("target\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("h2",{attrs:{id:"_5-5-templates-wordpress-conf"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-templates-wordpress-conf"}},[s._v("#")]),s._v(" 5.5 templates/wordpress.conf")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 nginx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# cat templates"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wordpress"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf \nserver "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    listen       "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" http_port "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    server_name  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" server_name "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    root   html"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wordpress"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    index index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("php index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    location "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" \\"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gif"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("jpg"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("jpeg"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("png"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("css"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("js"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n       expires "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    location "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),s._v(" \\"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("php$ "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        root           html"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wordpress"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        fastcgi_pass   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        fastcgi_index  index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("php"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        fastcgi_param  "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SCRIPT_FILENAME")]),s._v("  $document_root$fastcgi_script_name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        include        fastcgi_params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("h1",{attrs:{id:"_06-roles-php"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_06-roles-php"}},[s._v("#")]),s._v(" 06.roles/php")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 roles"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# tree php\nphp\n├── files\n│   ├── php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.6")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".38")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz\n│   ├── php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf\n│   ├── php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service\n│   └── php"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ini\n├── handlers\n│   └── main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml\n└── tasks\n    └── main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h2",{attrs:{id:"_6-1-tasks-main-yml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-tasks-main-yml"}},[s._v("#")]),s._v(" 6.1 tasks/main.yml")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 php"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# cat tasks"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml \n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Install php deps\n  yum"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" item "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" state"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("present\n  with_items"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" gd"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("devel \n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" libxml2"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("devel \n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" libcurl"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("devel \n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" libjpeg"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("devel \n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" libpng"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("devel \n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Copy php source pkg \n  #get_url"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" url"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("php"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("net"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("distributions"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" php_version "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz dest"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tmp"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" php_version "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz\n  copy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" src"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" php_version "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz dest"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tmp\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Install php\n  shell"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" cd "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tmp "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" \n         tar zxf php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" php_version "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" \n         cd php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" php_version "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n         "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("configure "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("prefix"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("php "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("config"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("file"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("path"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc \n         "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("mysql "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("mysqli "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("openssl "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zlib "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("curl "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("gd \\\n         "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("jpeg"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dir "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("png"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dir "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("iconv "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("enable"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("enable"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zip "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("enable"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("mbstring "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" \n         make "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("j "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" make install\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Copy php configuration file\n  copy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" src"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("php"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ini dest"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n  notify"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" \n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" reload systemd\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" reload restart php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm \n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Copy php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm configuration file\n  copy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" src"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf dest"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" \n  notify"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" \n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" reload systemd\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" reload restart php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm \n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Copy php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service\n  copy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" src"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service dest"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("systemd"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("system"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Start php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm\n  service"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm state"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("started enabled"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br")])]),n("h2",{attrs:{id:"_6-2-handlers-main-yml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-handlers-main-yml"}},[s._v("#")]),s._v(" 6.2 handlers/main.yml")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 php"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# cat handlers"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml \n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" reload systemd\n  command"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" systemctl daemon"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("reload\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" reload restart php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm\n  service"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm state"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("restarted\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h2",{attrs:{id:"_6-3-files-php-fpm-conf"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-files-php-fpm-conf"}},[s._v("#")]),s._v(" 6.3 files/php-fpm.conf")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 roles"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# egrep "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("v "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("';'")]),s._v(" php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("files"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("global"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\npid "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("run"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pid\nerror_log "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log\nlog_level "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" warning\nemergency_restart_threshold "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nemergency_restart_interval "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nprocess_control_timeout "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("s\ndaemonize "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" yes\nrlimit_files "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10240")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nuser "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" nobody\ngroup "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" nobody\nlisten "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("9000")]),s._v("\nlisten"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("owner "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" nobody\nlisten"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("group "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" nobody\npm "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" \npm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_children "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v("\npm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("start_servers "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\npm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("min_spare_servers "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\npm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_spare_servers "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\npm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_requests "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v("\nslowlog "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("$pool"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("slow\nrequest_slowlog_timeout "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("h2",{attrs:{id:"_6-4-files-php-fpm-service"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-files-php-fpm-service"}},[s._v("#")]),s._v(" 6.4  files/php-fpm.service")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 php"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# cat files"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nDescription"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("The "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PHP")]),s._v(" FastCGI Process Manager\nAfter"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("syslog"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("target network"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("target\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nType"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("simple\nPIDFile"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("run"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pid\nExecStart"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sbin"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("nodaemonize "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("fpm"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("config "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("php"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf\nExecReload"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("kill "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("USR2")]),s._v(" $"),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MAINPID")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nWantedBy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("multi"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("target\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("h2",{attrs:{id:"_6-5-files-php-ini"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-5-files-php-ini"}},[s._v("#")]),s._v(" 6.5 files/php.ini")]),s._v(" "),n("h1",{attrs:{id:"_07-roles-wordpress"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_07-roles-wordpress"}},[s._v("#")]),s._v(" 07.roles/wordpress")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 roles"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# tree wordpress"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\nwordpress"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n├── tasks\n│   └── main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml\n└── templates\n    └── wp"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("php\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h2",{attrs:{id:"_7-1-tasks-main-yml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-tasks-main-yml"}},[s._v("#")]),s._v(" 7.1 tasks/main.yml")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 wordpress"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# cat tasks"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Download WordPress\n  get_url"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" url"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("cn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("wordpress"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("org"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wordpress"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" wp_version "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zh_CN"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz dest"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tmp"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wordpress"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" wp_version "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zh_CN"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz\n  #copy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" src"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("wordpress"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" wp_version "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz dest"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tmp\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Extract archive\n  unarchive"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" src"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tmp"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wordpress"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" wp_version "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("zh_CN"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz dest"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("html copy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("no \n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Copy WordPress config file\n  template"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" src"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("wp"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("php dest"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("html"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wordpress\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Change ownership "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("of")]),s._v(" WordPress installation\n  file"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("html"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wordpress owner"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nobody group"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nobody state"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("directory recurse"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("h2",{attrs:{id:"_7-2-templates-wp-config-php"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-templates-wp-config-php"}},[s._v("#")]),s._v(" 7.2 templates/wp-config.php")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 wordpress"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# cat templates"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("wp"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("php\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("php\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * WordPress基础配置文件。\n *\n * 这个文件被安装程序用于自动生成wp-config.php配置文件，\n * 您可以不使用网站，您需要手动复制这个文件，\n * 并重命名为“wp-config.php”，然后填入相关信息。\n *\n * 本文件包含以下配置选项：\n *\n * * MySQL设置\n * * 密钥\n * * 数据库表名前缀\n * * ABSPATH\n *\n * @link https://codex.wordpress.org/zh-cn:%E7%BC%96%E8%BE%91_wp-config.php\n *\n * @package WordPress\n */")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ** MySQL 设置 - 具体信息来自您正在使用的主机 ** //")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** WordPress数据库的名称 */")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("define")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DB_NAME'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{{ wp_db_name }}'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** MySQL数据库用户名 */")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("define")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DB_USER'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{{ wp_db_user }}'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** MySQL数据库密码 */")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("define")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DB_PASSWORD'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{{ wp_db_password }}'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** MySQL主机 */")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("define")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DB_HOST'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{{ db_host }}'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** 创建数据表时默认的文字编码 */")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("define")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DB_CHARSET'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf8'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** 数据库整理类型。如不确定请勿更改 */")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("define")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DB_COLLATE'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**#@+\n * 身份认证密钥与盐。\n *\n * 修改为任意独一无二的字串！\n * 或者直接访问{@link https://api.wordpress.org/secret-key/1.1/salt/\n * WordPress.org密钥生成服务}\n * 任何修改都会导致所有cookies失效，所有用户将必须重新登录。\n *\n * @since 2.6.0\n */")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("define")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'AUTH_KEY'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'put your unique phrase here'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("define")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SECURE_AUTH_KEY'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'put your unique phrase here'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("define")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'LOGGED_IN_KEY'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'put your unique phrase here'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("define")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NONCE_KEY'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'put your unique phrase here'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("define")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'AUTH_SALT'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'put your unique phrase here'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("define")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'SECURE_AUTH_SALT'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'put your unique phrase here'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("define")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'LOGGED_IN_SALT'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'put your unique phrase here'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("define")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NONCE_SALT'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("       "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'put your unique phrase here'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**#@-*/")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * WordPress数据表前缀。\n *\n * 如果您有在同一数据库内安装多个WordPress的需求，请为每个WordPress设置\n * 不同的数据表前缀。前缀名只能为数字、字母加下划线。\n */")]),s._v("\n$table_prefix  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'wp_'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * 开发者专用：WordPress调试模式。\n *\n * 将这个值改为true，WordPress将显示所有用于开发的提示。\n * 强烈建议插件开发者在开发环境中启用WP_DEBUG。\n *\n * 要获取其他能用于调试的信息，请访问Codex。\n *\n * @link https://codex.wordpress.org/Debugging_in_WordPress\n */")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("define")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'WP_DEBUG'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * zh_CN本地化设置：启用ICP备案号显示\n *\n * 可在设置→常规中修改。\n * 如需禁用，请移除或注释掉本行。\n */")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("define")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'WP_ZH_CN_ICP_NUM'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* 好了！请不要再继续编辑。请保存本文件。使用愉快！ */")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** WordPress目录的绝对路径。 */")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("defined")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ABSPATH'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("define")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ABSPATH'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dirname")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__FILE__"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** 设置WordPress变量和包含文件。 */")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require_once")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ABSPATH")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'wp-settings.php'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br"),n("span",{staticClass:"line-number"},[s._v("84")]),n("br"),n("span",{staticClass:"line-number"},[s._v("85")]),n("br"),n("span",{staticClass:"line-number"},[s._v("86")]),n("br"),n("span",{staticClass:"line-number"},[s._v("87")]),n("br"),n("span",{staticClass:"line-number"},[s._v("88")]),n("br"),n("span",{staticClass:"line-number"},[s._v("89")]),n("br"),n("span",{staticClass:"line-number"},[s._v("90")]),n("br"),n("span",{staticClass:"line-number"},[s._v("91")]),n("br"),n("span",{staticClass:"line-number"},[s._v("92")]),n("br"),n("span",{staticClass:"line-number"},[s._v("93")]),n("br"),n("span",{staticClass:"line-number"},[s._v("94")]),n("br"),n("span",{staticClass:"line-number"},[s._v("95")]),n("br"),n("span",{staticClass:"line-number"},[s._v("96")]),n("br"),n("span",{staticClass:"line-number"},[s._v("97")]),n("br")])]),n("h1",{attrs:{id:"_08-部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_08-部署"}},[s._v("#")]),s._v(" 08.部署")]),s._v(" "),n("ul",[n("li",[s._v("添加目的主机的免密登录，在ansibe机器上执行")])]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# ssh"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("keygen "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("t dsa\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# ssh"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("copy"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("id "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".56")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v(".65")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("部署")])]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 nginx_php"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# ansible"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("playbook "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("i hosts site"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("syntax"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("check    # 先查看是否有语法错误\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 nginx_php"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# ansible"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("playbook "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("i hosts site"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("yml              # 执行部署\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);