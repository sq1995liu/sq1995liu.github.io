(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{515:function(s,a,t){s.exports=t.p+"assets/img/image-20201014154214278.64bebe4f.png"},516:function(s,a,t){s.exports=t.p+"assets/img/image-20201012224011582.a88062d9.png"},517:function(s,a,t){s.exports=t.p+"assets/img/image-20201012220846793.6934da86.png"},518:function(s,a,t){s.exports=t.p+"assets/img/image-20201015091404959.c20ec20e.png"},519:function(s,a,t){s.exports=t.p+"assets/img/image-20201012221745829.d3ee14db.png"},520:function(s,a,t){s.exports=t.p+"assets/img/image-20201012222054188.a91eafee.png"},885:function(s,a,t){"use strict";t.r(a);var n=t(21),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"_1-支付宝支付流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-支付宝支付流程"}},[s._v("#")]),s._v(" 1.支付宝支付流程")]),s._v(" "),n("p",[s._v("https://www.lanqiao.cn/vip")]),s._v(" "),n("p",[n("img",{staticStyle:{width:"800px","margin-left":"50px"},attrs:{src:t(515)}})]),s._v(" "),n("p",[n("img",{staticStyle:{width:"800px","margin-left":"50px"},attrs:{src:t(516)}})]),s._v(" "),n("h1",{attrs:{id:"_2-新建支付宝应用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-新建支付宝应用"}},[s._v("#")]),s._v(" 2.新建支付宝应用")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 访问"支付宝开发平台"登录，可以访问开发者中心')]),s._v("\nhttps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("//")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("alipay"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("platform"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("htm\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 可以参考"电脑网站支付" 熟悉电脑支付整体流程')]),s._v("\nhttps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("//")]),s._v("docs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("alipay"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("270")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("105899")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"_2-1-第一步：创建应用（这里使用沙箱环境测试）"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-第一步：创建应用（这里使用沙箱环境测试）"}},[s._v("#")]),s._v(" 2.1 第一步：创建应用（这里使用沙箱环境测试）")]),s._v(" "),n("ul",[n("li",[s._v("沙箱环境说明\n"),n("ul",[n("li",[s._v("线上环境需要创建应用，因为我们不是企业，没有资质，所以只能申请沙箱环境")]),s._v(" "),n("li",[s._v("简单来讲沙箱环境就是给开发者使用的测试环境")]),s._v(" "),n("li",[n("code",[s._v("沙箱环境地址：")]),s._v("https://openhome.alipay.com/platform/appDaily.htm?tab=info")])])])]),s._v(" "),n("p",[n("img",{staticStyle:{width:"800px","margin-left":"50px"},attrs:{src:t(517)}})]),s._v(" "),n("ul",[n("li",[n("code",[s._v("公钥加密、私钥解密")])])]),s._v(" "),n("p",[n("img",{staticStyle:{width:"700px","margin-left":"50px"},attrs:{src:t(518)}})]),s._v(" "),n("h3",{attrs:{id:"_2-2-按照官方要求生成秘钥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-按照官方要求生成秘钥"}},[s._v("#")]),s._v(" 2.2 按照官方要求生成秘钥")]),s._v(" "),n("p",[n("code",[s._v("生成秘钥参考官网：")]),s._v("https://docs.open.alipay.com/291/105971")]),s._v(" "),n("ul",[n("li",[s._v("一定要存储两个东西\n"),n("ul",[n("li",[s._v("支付宝公钥：我发送信息给支付宝，使用支付宝公钥进行加密")]),s._v(" "),n("li",[s._v("app私钥（我自己生成的）：支付宝给我发送的信息是用我刚刚上传的app公钥加密，只有我自己的私钥可以解密")])])])]),s._v(" "),n("p",[n("img",{staticStyle:{width:"800px","margin-left":"50px"},attrs:{src:t(519)}})]),s._v(" "),n("h3",{attrs:{id:"_2-3-把生成的app公钥粘贴到沙箱环境的app中"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-把生成的app公钥粘贴到沙箱环境的app中"}},[s._v("#")]),s._v(" 2.3 把生成的app公钥粘贴到沙箱环境的app中")]),s._v(" "),n("p",[n("code",[s._v("沙箱环境地址：")]),s._v("https://openhome.alipay.com/platform/appDaily.htm?tab=info")]),s._v(" "),n("p",[n("img",{staticStyle:{width:"800px","margin-left":"50px"},attrs:{src:t(520)}})]),s._v(" "),n("h3",{attrs:{id:"_2-4-查看沙箱环境账号和密码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-查看沙箱环境账号和密码"}},[s._v("#")]),s._v(" 2.4 查看沙箱环境账号和密码")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 买家信息")]),s._v("\n买家账号foqhub3270@sandbox"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com\n登录密码"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("111111")]),s._v("\n支付密码"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("111111")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 商家账号uqqgmd6602@sandbox.com")]),s._v("\n商户UID2088102180143385\n登录密码"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("111111")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("h1",{attrs:{id:"_3-测试支付宝获取支付宝扫码链接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-测试支付宝获取支付宝扫码链接"}},[s._v("#")]),s._v(" 3.测试支付宝获取支付宝扫码链接")]),s._v(" "),n("h3",{attrs:{id:"_3-1-支付宝开发网址"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-支付宝开发网址"}},[s._v("#")]),s._v(" 3.1 支付宝开发网址")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[s._v("支付宝开放平台： https"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("open"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("alipay"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("platform"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("htm\n支付宝沙箱环境： https"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openhome"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("alipay"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("platform"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("appDaily"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("htm"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("tab"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("info\n支付宝开发者文档：https"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openhome"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("alipay"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("developmentDocument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("htm\n电脑网站支付流程：https"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("open"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("alipay"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("270")]),s._v("\n生成签名：https"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("open"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("alipay"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("291")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("106103")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\npython"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("alipay"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("adk "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" https"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("github"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("fzlee"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("alipay"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("blob"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("master"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("README")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("zh"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("hans"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("md\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h3",{attrs:{id:"_3-2-说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-说明"}},[s._v("#")]),s._v(" 3.2 说明")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("阿里官方没有提供python对接支付的sdk，但是python库中有非官方的sdk包可以使用")])]),s._v(" "),n("li",[n("p",[s._v("python-alipay-adk : https://github.com/fzlee/alipay/blob/master/README.zh-hans.md")])]),s._v(" "),n("li",[n("p",[s._v("使用起来非常简单，只要传入几个必要的参数就可以完成")])]),s._v(" "),n("li",[n("p",[s._v("由于支付对安全要求很高，所以要理解对接支付宝安全的流程："),n("strong",[n("code",[s._v("公钥加密、私钥解密")])]),s._v(" 这八个字")])])]),s._v(" "),n("h3",{attrs:{id:"_3-3-app-private-key-pem-app私钥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-app-private-key-pem-app私钥"}},[s._v("#")]),s._v(" 3.3 "),n("code",[s._v("app_private_key.pem")]),s._v(" app私钥")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("-----BEGIN RSA PRIVATE KEY-----\nMIIEpAIBAAKCAQEAxXRdL+ALzW4AW6ndW5/ZD44ppPsfm9If/oc3pc1gmqjT7z73swlUhotEPZnLsk8hqdEoR9fg/+0XijuJQqnU+CU3pptdXgkIcyq/fyvpRgkX2OA9G7CHEveZ97leaOG2RI1i2JvgUiM+O2LiDAAbTWtk8Chx+j2Z+R5s22zgI/y+45bcMht/YDxAbmgDFkBq32PyHlu3gTjoB7SqBZ8ecU8AKBxSjUPB3t5ls4T2P3Xy/ER2/PFcnh0vZGQsZRbHQ6wS1Jsql/3Wu1+tvHvIiKKXPGUcZe7czfqfwcIwVPrntEdPYC2JUSzC94vFwcMNAlai/aiWDCc4jDt1W7oetwIDAQABAoIBAQDBNBESjUk/I0laZ6Vex9PeMp5w/f95umrv5GMA6yqBanyldplsJ877Lz4AgIId4Ovxe+TMF2HjSZxk98hg4Eiw3cnMTe1X28LW3Zcu2kqQ6sjYvuFMPLiOSJPxHwJP4bs07Jsxk6Q0+qMj/KduUpRkdpb3nruXvbrxVWHyel//FM6jqCvxxFWBhCikDjNPZEgPJa+at1viN/u1eOoEO5/SBkVYePF6O3Nx8rR20nG2KfvvLkfWfBvVnIWdmkUmqMX2EIXF+af66FlcgWTszvkxpIS3KnHGK5rHe2+uTuJp57MY0WnJq5v6vKwhOADvNiwLg2dwLDSq9SRJzWnsm+RBAoGBAP0wA92l9IlaggLD8WCFeVICiNWGlA2jSYfindMXX9rf6xo8hSr/YWfyxu6guBqvo7b/onG7DwyrDOvlq7X/kQNbtxkis/oYBeWssF6ab10CtFuF1wUP5jXoaAMUIy2xrXcmO5bJsvTE6O9VZophlSo0uvXxBJRSgqfEo0wEET6HAoGBAMel3KitQQArxiD8SHDE6q1hb5elIDTyYiJI65EagWO41xcBMduu0tjZyoTbL6MWKHCxxXuOsWpQjtuF8FVesDMBBpC9VLO4IvnQDZb7lKXWgEnMc4gckL+KNzgkIzYNs1jW6IYfcY82iP22AoH3xbnaYI56sH2lARUZcUNe/3pRAoGBAPWvYSD1SEz8yco7L4A1JRwCn5tsA0EUoWa97d6IARkYTkBgV+z4ciH3gTjQNraWl2wdthlcpmbpmRlT/gMWozY6CnvWpATcyOQtZdv3SndcB34EazlbS04mXsAWC2js0GIddJeG1CQW695K5b0EokWZc47yuTngsy5vbvJ1w/IDAoGAW5jpaCo1DFMJD9Evmy19ThbKEBUedaxPAdPa4DP88Te410EhEt1et0cU92dor7ZWz32AUXPiShizslv9K+3JgV0TGg0Dc4Ej6uFdmsvKI1wKd9FpoCUa9AYB16wcy4v1oOjYvdBnVYF70ItVEzQOb3qVmkkH+F1f5cJKiNJo/EECgYA1OZn4LqvFsK/WG23FFcW6wvGOKjHgAfwENILiHBjHNESYBtwnRaV0Vgikz3tfC5qehmuJT+N+bjsqsqaM3ZR50/xqWx6qGenA5KbGyMkWMu4LFAuqGKz1ocH2kjM+jc0eNRzABj7A9ATx+1nfiKD0ehc6lrXIp71rItEuKxyO8w==\n-----END RSA PRIVATE KEY-----\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"_3-4-alipay-public-key-pem-支付宝公钥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-alipay-public-key-pem-支付宝公钥"}},[s._v("#")]),s._v(" 3.4 "),n("code",[s._v("alipay_public_key.pem")]),s._v(" 支付宝公钥")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDIgHnOn7LLILlKETd6BFRJ0GqgS2Y3mn1wMQmyh9zEyWlz5p1zrahRahbXAfCfSqshSNfqOmAQzSHRVjCqjsAw1jyqrXaPdKBmr90DIpIxmIyKXv4GGAkPyJ/6FTFY99uhpiq0qadD/uSzQsefWo0aTvP/65zi3eof7TcZ32oWpwIDAQAB\n-----END PUBLIC KEY-----\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"_3-5-测试生成支付链接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-测试生成支付链接"}},[s._v("#")]),s._v(" 3.5 测试生成支付链接")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -*- coding: utf-8 -*-")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" alipay "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" AliPay\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 沙箱环境中 app 私钥")]),s._v("\napp_private_key_string "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'app_private_key.pem'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("read"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 支付宝公钥")]),s._v("\nalipay_public_key_string "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'alipay_public_key.pem'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("read"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("get_alipay_url")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 实例化一个alipay对象")]),s._v("\n    alipay "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" AliPay"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        appid"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2016101800716047"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 沙箱appid")]),s._v("\n        app_notify_url"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("None")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认回调url")]),s._v("\n        app_private_key_string"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("app_private_key_string"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 支付宝的公钥，验证支付宝回传消息使用，不是你自己的公钥,")]),s._v("\n        alipay_public_key_string"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("alipay_public_key_string"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        sign_type"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"RSA"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# RSA 或者 RSA2")]),s._v("\n        debug"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认False,我们是沙箱，所以改成True(让访问沙箱环境支付宝地址)")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 调用支付接口，生成支付链接")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 电脑网站支付，需要跳转到https://openapi.alipay.com/gateway.do? + order_string")]),s._v("\n    order_string "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" alipay"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("api_alipay_trade_page_pay"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        out_trade_no"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"201612226"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 订单id，应该从前端获取")]),s._v("\n        total_amount"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("str")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.01")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 订单总金额")]),s._v("\n        subject"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"测试阿里云付款"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 付款标题信息")]),s._v("\n        return_url"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("None")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 付款成功回调地址(可以为空)")]),s._v("\n        notify_url"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("None")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 付款成功后异步通知地址（可以为空）")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    pay_url "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://openapi.alipaydev.com/gateway.do?"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" order_string\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pay_url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将这个url复制到浏览器，就会打开支付宝支付页面")]),s._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("query_pay")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    alipay "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" AliPay"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        appid"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2016101800716047"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 沙箱appid")]),s._v("\n        app_notify_url"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("None")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认回调url")]),s._v("\n        app_private_key_string"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("app_private_key_string"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 支付宝的公钥，验证支付宝回传消息使用，不是你自己的公钥")]),s._v("\n        alipay_public_key_string"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("alipay_public_key_string"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        sign_type"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"RSA"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# RSA 或者 RSA2")]),s._v("\n        debug"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认False,我们是沙箱，所以改成True(让访问沙箱环境支付宝地址)")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    trade_query "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" alipay"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("api_alipay_trade_query"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        out_trade_no"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20161112")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上面生成支付码页面时传入的商品订单号")]),s._v("\n        trade_no"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("None")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("trade_query"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" __name__ "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'__main__'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    get_alipay_url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    query_pay"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('\'\'\'\ntrade_query 查询用户付款信息\n返回信息详情请看官方：https://docs.open.alipay.com/api_1/alipay.trade.query\n{\n    "code": "10000",    # code=10000代表支付成功\n    "msg": "Success",\n    "buyer_logon_id": "foq***@sandbox.com",\n    "buyer_pay_amount": "0.00",\n    "buyer_user_id": "2088102180228981",\n    "buyer_user_type": "PRIVATE",\n    "invoice_amount": "0.00",\n    "out_trade_no": "20161112",\n    "point_amount": "0.00",\n    "receipt_amount": "0.00",\n    "send_pay_date": "2020-02-20 21:20:48",\n    "total_amount": "0.01",\n    "trade_no": "2020022022001428981000087565",\n    "trade_status": "TRADE_SUCCESS"  \n}\n\'\'\'')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br")])]),n("ul",[n("li",[s._v("生成链接地址如下")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("https://excashier.alipaydev.com/standard/auth.htm?payOrderId=79d3a024f4904f58af434843b945132f.00\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);