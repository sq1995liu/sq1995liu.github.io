(window.webpackJsonp=window.webpackJsonp||[]).push([[278],{963:function(s,a,t){"use strict";t.r(a);var e=t(21),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"_01-ansible-安装与配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_01-ansible-安装与配置"}},[s._v("#")]),s._v(" 01.Ansible 安装与配置")]),s._v(" "),t("h2",{attrs:{id:"_1-1-ansible安装要求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-ansible安装要求"}},[s._v("#")]),s._v(" 1.1 ansible安装要求")]),s._v(" "),t("h3",{attrs:{id:"_1-1-1-服务端要求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-1-服务端要求"}},[s._v("#")]),s._v(" 1.1.1 服务端要求")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("Python2.6/2.7/3.x")])]),s._v(" "),t("li",[t("p",[s._v("RedHat, Debian, CentOS, OS X等（不支持Windows）")])])]),s._v(" "),t("h3",{attrs:{id:"_1-1-2-被管理服务器要求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-2-被管理服务器要求"}},[s._v("#")]),s._v(" 1.1.2 被管理服务器要求")]),s._v(" "),t("ul",[t("li",[s._v("OpenSSH")]),s._v(" "),t("li",[s._v("Python2.6/2.7/3.x")])]),s._v(" "),t("h2",{attrs:{id:"_1-2-安装-ansible"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-安装-ansible"}},[s._v("#")]),s._v(" 1.2 安装 Ansible")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("在 192.168.56.66 中安装")])])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# yum "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("y install ansible\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# pip "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("y install ansible\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("https://releases.ansible.com/ansible/")])]),s._v(" "),t("li",[t("p",[s._v("命令集：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("ansible：运行简单任务")])]),s._v(" "),t("li",[t("p",[s._v("ansible-doc：文档查看工具")])]),s._v(" "),t("li",[t("p",[s._v("ansible-playbook：执行 playbook")])]),s._v(" "),t("li",[t("p",[s._v("ansible-config：查看、编辑、管理 Ansible 配置")])]),s._v(" "),t("li",[t("p",[s._v("ansible-inventory：查看 inventory 信息")])]),s._v(" "),t("li",[t("p",[s._v("ansible-galaxy：共享和下载 roles 的工具")])]),s._v(" "),t("li",[t("p",[s._v("ansible-pull：从仓库拉取 playbooks")])]),s._v(" "),t("li",[t("p",[s._v("ansible-vault：文件加密工具")])]),s._v(" "),t("li",[t("p",[s._v("ansible-console：repl 控制台执行 Ansible 任务")])])])]),s._v(" "),t("li",[t("p",[s._v('注：这里我们只查看usage部分，详细部分可以通过 "'),t("code",[s._v("指令 -h")]),s._v('"  的方式获取')])])]),s._v(" "),t("h2",{attrs:{id:"_1-3-ansible配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-ansible配置文件"}},[s._v("#")]),s._v(" 1.3 ansible配置文件")]),s._v(" "),t("ul",[t("li",[s._v("Ansible 中的某些设置可通过配置文件（"),t("code",[s._v("/etc/ansible/ansible.cfg")]),s._v("）进行调整。")]),s._v(" "),t("li",[s._v("对于大多数用户来说，默认配置应该足够了。")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("node2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# vim "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ansible"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ansible"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cfg \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("defaults"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ninventory "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ansible"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hosts     # 指定被管理端主机清单\nhost_key_checking "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" False        # 关闭主机检查\nforks"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("                    # 指定执行时 ansible 并发数\nsudo_user "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" root              # 提权为 root （新版：become_user）\nremote_port "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("               # 连接端口\ntimeout "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\nlog_path "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ansible"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log\nprivate_key_file "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("root")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ssh"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("id_rsa\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);